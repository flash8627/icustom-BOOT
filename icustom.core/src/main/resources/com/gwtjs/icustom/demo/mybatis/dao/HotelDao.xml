<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<!-- namespace必须指向Dao接口 -->  
<mapper namespace="com.gwtjs.icustom.demo.mybatis.dao.HotelDao">  
  	
  	<sql id="page_st">
		SELECT * FROM (
		SELECT TT.* , ROWNUM RN FROM (
	</sql>
	<sql id="page_et">
		) TT
		<![CDATA[
		) WHERE RN<=#{1.endIndex} AND RN>=#{1.startIndex}
		]]>
	</sql>
	<select id="findByCountryPage" parameterType="String" resultType="com.gwtjs.icustom.demo.mybatis.entity.HotelDto">  
		<include refid="page_st" />
        select   
            c.name as cityName,  
            h.name as hotelName,  
            h.address,  
            h.zip,  
            c.state,  
            c.country   
        from test_city c   
        join test_hotel h on c.id=h.city   
        where 1=1 
        <include refid="page_et" />
    </select>  
    
    <select id="findByCountryPageCount" resultType="INTEGER">  
        select   
            count(1)   
        from test_city c   
        join test_hotel h on c.id=h.city   
        where 1=1  
    </select> 
    
    <sql id="select_cond">
		<if test='_parameter.get("0").country != null'>
			AND upper(c.country) = upper(#{0.country,jdbcType=VARCHAR})
		</if>
	</sql>
    
    <!-- 根据ID查询数据 -->  
    <select id="findByCountry" resultType="com.gwtjs.icustom.demo.mybatis.entity.HotelDto">  
        select   
            c.name as cityName,  
            h.name as hotelName,  
            h.address,  
            h.zip,  
            c.state,  
            c.country   
        from test_city c   
        join test_hotel h on c.id=h.city   
        where c.country = #{country}
    </select>  
</mapper>
