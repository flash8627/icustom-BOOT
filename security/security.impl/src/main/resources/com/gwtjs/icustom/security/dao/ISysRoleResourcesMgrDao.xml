<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- namespace和定义的Mapper接口对应，并实现其中的方法 -->
<mapper namespace="com.gwtjs.icustom.security.dao.ISysRoleResourcesMgrDao">

	<select id="findByRoleResource" resultType="com.gwtjs.icustom.springsecurity.entity.SysRoleResourceVO">
		SELECT t.id              id,
		       t.role_id         roleId,
		       rt.role_name      roleName,
		       t.resource_id     resourceId,
		       srt.resource_name resourceName
		  FROM SYS_ROLE_RESOURCE_T t
		  JOIN SYS_ROLE_T rt
		    ON (t.role_id = rt.role_id AND rt.valid_flag = 1)
		  JOIN SYS_RESOURCE_T srt
		    ON (t.resource_id = srt.resource_id AND srt.valid_flag = 1)
		 WHERE t.valid_flag = 1
		   AND t.role_id = #{roleId,jdbcType=NUMERIC}
	</select>
	
</mapper>